clear color_buffer_bit | depth_buffer_bit

From "" import camera, projection, time
From "init shaders" import u
From "init main" import b_buffer

Var cp: Array of Vector

// cp[0] = pos(-4, -3, -1)
// cp[1] = pos(-2 * sin(.14*time), 3 * cos(.11 * time), 8*sin(.2*time))
// cp[2] = pos(3, 2, -8)
// cp[3] = pos(4, -1, 1)



cp[0] = pos(0, 0, 0)
cp[1] = pos(0.7142857142857144, 0.3392857142857143, -0.3392857142857143)
cp[2] = pos(2.2857142857142856, 0.6250000000000001, -0.05357142857142861)
cp[3] = pos(3.0, 0, 0)
cp[4] = pos(3.7142857142857144, -0.6250000000000001, 0.05357142857142861)
cp[5] = pos(3.571428571428573, -2.160714285714286, -0.12499999999999986)
cp[6] = pos(3.0, -3.0, 0)
cp[7] = pos(2.428571428571427, -3.839285714285714, 0.12499999999999986)
cp[8] = pos(1.4285714285714235, -3.982142857142856, 0.553571428571428)
cp[9] = pos(1.0, -3.0, 1)
cp[10] = pos(0.5714285714285765, -2.017857142857144, 1.446428571428572)
cp[11] = pos(0.7142857142857331, 0.08928571428570997, 1.9107142857142878)
cp[12] = pos(1.0, 1.0, 1)
cp[13] = pos(1.285714285714267, 1.91071428571429, 0.08928571428571219)
cp[14] = pos(1.7142857142856442, 1.625000000000016, -2.196428571428579)
cp[15] = pos(2.0, 1.0, -2)
cp[16] = pos(2.2857142857143558, 0.374999999999984, -1.8035714285714208)
cp[17] = pos(2.42857142857169, -0.5892857142857739, 0.8750000000000284)
cp[18] = pos(2.0, -1.0, 2)
cp[19] = pos(1.57142857142831, -1.410714285714226, 3.1249999999999716)
cp[20] = pos(0.571428571427596, -1.2678571428569203, 2.6964285714284655)
cp[21] = pos(0.0, -1.0, 2)
cp[22] = pos(-0.571428571427596, -0.7321428571430797, 1.3035714285715345)
cp[23] = pos(-0.7142857142820738, -0.33928571428654486, 0.33928571428610965)
cp[24] = pos(0, 0, 0)

bindbuffer array_buffer, b_buffer
buffersubdata array_buffer, 0, cp

uniform4f u.lp, pos(10, 10, 40)
uniformmatrix4f u.p, projection
uniformmatrix4f u.v, camera

patchparameter patch_vertices, 4

Var i: Natural = 0
While i < 8
  drawarrays patches, 3 * i, 4
  i = i + 1
Endwhile




